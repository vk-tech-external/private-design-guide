# {heading(Требования к инфраструктуре)[id=structure_requirements]}

## {heading(Требования к операционной системе)[id=requirements_os]}

Операционная система должна выбираться из списка поддерживаемых систем. Важно соблюсти идентичность версий ОС на всех серверах платформы.

Поддерживаемые ОС:

* CentOS 7.6.1810

Установка выполняется с помощью компонента **Eine** или вручную с предоставленного дистрибутива ОС. Используется вариант установки **Minimal Install**.

В состав дистрибутива входят репозитории необходимых пакетов для выбранной ОС. Таким образом, во время развертывания не потребуется доступ в Интернет.

## {heading(Требования к доменным именам и сертификатам)[id=dns_certs_requirements]}

Рекомендуется выбор основного домена для установки вида `vkc.domain.tld`, где `domain.tld` — произвольный домен, используемый у заказчика. Основной домен может быть как третьего, так и любого другого уровня. При этом нужно учитывать, что компоненты платформы потребуют дополнительных FQDN для своей работы. Они будут выделяться в поддомене {var(sys2)}.

Ниже приведен рекомендуемый список FQDN для {var(sys2)}. Все имена должны иметь соответствующие записи в DNS заказчика.

{caption(Таблица {counter(table)[id=numb_tab_fqdn_list]} — Список FQDN для {var(sys2)})[align=right;position=above;id=tab_fqdn_list;number={const(numb_tab_fqdn_list)}]}
[cols="2,1", options="header"]
|===
|Система
|Имя домена

|Портал самообслуживания
|vkc.domain.tld

|Портал администратора
|admin.vkc.domain.tld

|Портал управления доступом (Keycloak)
|idm.vkc.domain.tld

|Репозиторий пакетов для платформы и PaaS-сервисов
|repo.vkc.domain.tld

|Репозиторий образов Docker для платформы и PaaS-сервисов
|registry.vkc.domain.tld

|Портал просмотра журналов событий (OpenSearch)
|logs.vkc.domain.tld

|Портал мониторинга (Zabbix)
|monitoring.vkc.domain.tld

|Внутренний интерфейс взаимодействия компонентов
|internal.vkc.domain.tld
|===
{/caption}

Для доступа к управляющим интерфейсам {var(system)} используется протокол HTTPS с шифрованием данных. Для его работы требуется генерация сертификатов. Сертификат должен быть выпущен центром сертификации и содержать полную цепочку сертификатов центров сертификации, выдавших его. Возможно использовать как общедоступные центры сертификации, так и собственный (непубличный) центр сертификации заказчика. В случае использования непубличного центра сертификации потребуется добавление сертификата CA в список доверенных при подготовке образов для компонентов VK Magnum (K8s-aaS) и Marketplace.

<warn>

Рекомендуется использовать wildcard-сертификаты для используемых FQDN. Использование сертификатов с конечным списком имен возможно, но может в дальнейшем создать трудности при установке новых компонентов платформы.

</warn>

Рекомендуемый список доменов для запрашиваемых сертификатов:

* `vkc.domain.tld`
* `*.vkc.domain.tld`

Полный пример корректного сертификата приведен в Руководстве администратора.

## {heading(Доступ к службам заказчика)[id=access_customer_services]}

Для работы облачной платформы требуется обеспечить доступ к следующим службам в корпоративной сети заказчика:

* NTP — служба точного времени. С ней будет выполняться синхронизация времени на серверах платформы.
* DNS — служба сетевых имен. Необходима для корректного сетевого взаимодействия между компонентами платформы и доступа к управляющим интерфейсам. Должны быть заведены записи FQDN для управляющих интерфейсов и для сетевых интерфейсов серверов {var(sys2)} (эти адреса будут использованы в inventory).
* LDAP/Active Directory — служба каталогов. Используется в качестве единой базы пользователей и групп для аутентификации. Возможно использование платформы без интеграции с данной службой, но в большинстве случаев интеграция входит в требования заказчика.

Для всех данных служб необходимо получить данные для взаимодействия: адреса серверов, номера портов (в случае использования нестандартных), данные для аутентификации и запроса информации в LDAP/AD. Все перечисленные службы должны быть постоянно доступны и отвечать на запросы с минимальной задержкой для обеспечения корректной и стабильной работы {var(sys2)}.

При запросе заказчиком интеграции с дополнительными службами (интеграция должна быть согласована с командами продукта и внедрения) необходимо добавить данные для взаимодействия с этими службами в Технический паспорт проекта.